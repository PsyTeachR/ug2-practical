## Additional Material

Below is some additional material that might help you understand permutations a bit more and some additional ideas.

```{r lab5-solutions-data, eval = TRUE, echo = FALSE, message = FALSE, warning = FALSE}
set.seed(1409)
dat <- read_csv("./data/05-s01/inclass/perm_data.csv") %>% 
  mutate(subj_id = row_number())
``` 

### More on `pivot_wider()`

Previously you learned `gather()` to bring columns together. Well the opposite of gather is the `tidyr::spread()` function to split columns apart - as below.

```{r diff_spread, eval = FALSE}
my_data_means %>%
  spread(group, m)
```

The spread function (`?spread`) splits the data in column `m` by the information, i.e. labels, in column `group` and puts the data into separate columns.  A call to `spread()` followed by a `mutate()` can be used to calculate the difference in means - see below:

```{r spread_mutate, eval=FALSE}
my_data_means %>%
  spread(group, m) %>%
  mutate(diff = A - B) 
```

### More on Simulating your own data

* Set the seed so that everyone in your group gets same data

```{r set-the-seed}
set.seed(1409)
```

* Going to need at least tidyverse

```{r libraries, warning = FALSE, message=FALSE}
library(tidyverse)
```

* Couple of decisions to make

```{r}
N <- 100                  # Total number of participants in study
n_groups <- 2             # Number of groups in your study
n_response_options <- 3   # Number of Response Options in your study
```

* Simulate some data using code from Lab 4 and 5.
* Names of your groups are set as **A** and **B**. You should edit appropriately and add additional names if you have more or less than 2 groups
* NOTE: if N/n_groups is not an integer then you will have uneven people in your groups and should edit the `times = ....` appropriately based on code in Lab 4. E.g. `times = c(49,51)`

```{r data-simulate}
my_data <- tibble(Groups = rep(c("A","B"), # Names of your Groups
                               times = N/n_groups), 
                  Responses = sample(1:n_response_options, 
                                     size = N, 
                                     replace = TRUE))
```

* If you wanted to save your data as a .csv file for later use or to send to a colleague, you could use

```{r data-save, eval=FALSE}
write_csv(my_data, "my_data.csv")
```

You can now use this simulated data, based on your designed study, to practice your hand calculations of chi-squares and practice writing it up. With a bit of wrangling, you can convert `my_data` into a cross-tabulation table that would look like:

```{r data-table, echo = FALSE}
chi_table <- my_data %>% 
  group_by(Groups, Responses) %>% 
  count() %>% 
  pivot_wider(names_from = "Responses", values_from = "n")
```

```{r}
knitr::kable(chi_table, align = "c", caption = "Cross-Tabulation Table of Simulated Data for learning about chi-squares")
```


### More on Permutations